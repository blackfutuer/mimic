
* 可见曝光对接
    - 广告自己接 done
* 加载更多逻辑（点击加载更多，下拉加载更多）
* 回退拦截逻辑 backforword cache
    自己实现 done
* 广告逻辑
* 对接逻辑 
    - 
* 模板同步方案
    - http://wap_front.dev.sina.cn/haiyang/tem/index.html# 模板
    - 抽离feed相关css
* 性能要求
    - 整理一个性能测试指标
* 测试浏览器，机器范围
    - uc, QQ, 百度，华为
* 在新版上测试和切换

* 有些频道有猜你喜欢，但猜你喜欢数据回来的晚
    - 有猜你喜欢的频道用猜你喜欢的事件进行初始化
    - 没有猜你喜欢的频道用回退拦截初始化 done
    - 
* 无图或者有图模式， 无图会重新刷页面
    - getCookie(NPIC)
        Y ? 所有模板都变成无图模板 done
        N : 正常逻辑 done

* 转换位置配置，插入广告 done
* 广告拦截监测 done
* 点击坐标增加 done


/**
 * 1、slot支持响应式尺寸
 * 2、支持批量请求和逐个请求切换 done
 * 3、可见曝光监测 done
 * 4、支持手势出调试信息 done
 * 5、缓存等，增量更新（不可行，服务器配置要求，非同域）
 * 6、安全检查XSS
 * 7、使用静态池 
 * 8、性能监测，通过sinaglobal进行灰度或者对某些页面或者对单个广告进行，需要确定优先级
 * 9、支持lazyload，支持refresh done
 * 10、支持safeframe 
 * 11、解决bfcache问题 done
 * 12、一个slot支持多种广告服务，保存在slot列表中，不同的广告服务可以有不同的数据渲染方法
 *     当一个slot没有被某个服务填充的时候，可以由下一个服务填充
 * 13、图片懒加载，修复了io的一个问题
 * 14、记录slots生命周期的时间点，通过数据中的_profile_字段或者url?\_\_debug_mimic\_\_来决定是否发送log,
 * 15、貌似内存回收控制的不是很好，下周解决内存问题
 * 
 * 
 * 
 * 
 */

业务优化
* 支持手势调试信息
* 支持详细的性能监测数据，包括宿主页面加载时间，内存，依赖库加载时间，impress请求时间，渲染时间等等
* 解决了bfcache重新执行广告渲染的问题
在小米浏览器下前进后退不触发pageshow和pagehide，也无法冻结window，无法使用setInterval兼容

工作流优化
* 模板编译器mimic-compile，通过webcomponents方式编写模板，最终编译成纯js(动态生成style, 动态class 命名）的第三方组件库
* 完全解耦各个频道，自动生成代码，书写维护方便，样式隔离等优点
* 使用rollup打包，支持es6模块化开发语法，支持tree-shaking按需抽离lib，支持es6语法，使用iife打包方式比传统的webpack体积更小（小20%），效率更高（查看性能对比）
* 标准语法静态校验，减少隐藏问题

关于bfcache
       pageshow  persisted    onload/when backforward   runjs/when backforward
a qq:      Y           Y                 N                       N
a UC:      Y           Y                 N                       N
a chrome:  Y           N                 Y                       Y
a baidu:   Y           Y                 N                       N
safari:  

20170220
    profile性能问题，
      1、feed component创建节点问题，有泄露，在destory的时候没有unobserve lazyload
      2、mac chrome带参数启动用于调试memory
      3、slot refresh'没有调用component的destory问题
      4、jsonp节点使用后未删除，img log 内存没有回收
      5、目前内存占用稳定在3-4M, 属于合理范围
    确定首批上线在军事频道
20170221
    完成开发，等待手浪给提供测试地址
    着手开发上传cdn工作流，找振军支持静态池的上传服务
    申请upyun账号在振军开发完成前进行前端工作流工具的测试
    自动上传cdn工作流能够极大方便我们上线脚本的工作，以前需要登录一个系统，然后一步步通过界面点击上传，比较麻烦，也只能一个个上传
20170222
    1、跟进排查cdn ttfb长的问题，国平已经解决，但目前静态池过期时间为300s，后续需要调整更大，给国平一个path
    2、流量保护周会
    3、与手浪沟通广告与业务的事件解构，理清猜你喜欢，加载更多，首次加载（静态化）的问题，并完成feed广告调用与页面的解耦
    4、与手浪晶磊沟通后续手浪广告的交接问题
    5、手浪提供了feed广告测试demo页面，部署并进行自测
20170223
    1、与贝丽排查新闻正文页pv与广告pv差距大的问题，初步怀疑是有些页面在bfcache的时候发送了页面pv而没有重刷广告
    2、手浪feed广告代码codereview
    3、与挺哥确认军事上线后需要提前提供给他军事pdps用来监测广告是否正常
    4、继续昨天与晶磊的交接沟通，与世民，唯峰讨论了处理方案，广告这边会吧旧的sinaSax代码也接管过来，这样统一feed的技术对接人，提高效率，非标后续唯峰评估交接方案
    5、协助建扣解决扒取外站图片的问题
20170224
    1、继续自测手浪feed代码，主要测试回退状态，下周提测并进行军事上线

    读数据

20170227 - 20170303
    1、发起提测，并给测试详细介绍了此次接管的代码细节
    2、测试发现手浪的猜你喜欢接口不对，沟通并修改bug
    3、沟通360的信息流广告接管问题
    4、沟通手浪交接其他广告问题
    5、测试发现缺少文字信息流模板，视频信息流模板，视频大图模板，霸星信息流模板，沟通需求并开发
    6、排查正文页pv过大的问题
    











V8支持问题
1、f_card不在是信息流的标识 远定
2、$不再使用？ 原生
3、接口事件是否有变动？ feedMore 回调加参数（容器id，支持数组），缺省用body为容器
4、怎么应对彭刚新提的关于v8的广告添加逻辑？

