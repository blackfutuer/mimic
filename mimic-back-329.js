!function(){"use strict";function e(e){return"[object Function]"===Object.prototype.toString.call(e)}function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return"[object String]"===Object.prototype.toString.call(e)}function o(e){return Object.prototype.toString.call(e)&&"[object Number]"===isFinite(e)}function i(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)}function r(e){if(i(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie);if(n)return n[2]||null}return null}function a(e,t,n){if(i(e)){n=n||{};var o=n.expires;"number"==typeof n.expires&&(o=new Date,o.setTime(o.getTime()+n.expires)),document.cookie=e+"="+t+(n.path?"; path="+n.path:"")+(o?"; expires="+o.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")}}function s(e){var t=r(e);return"string"==typeof t?t=decodeURIComponent(t):null}function c(e,t,n){a(e,encodeURIComponent(t),n)}function u(e,t){t=t||{},t.expires=new Date(0),a(e,"",t)}function l(){return+new Date}function f(e,t){return Math.floor(e+Math.random()*(t-e+1))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return n(e)?t.getElementById(e):e}function m(){if(document.currentScript)return document.currentScript.src;var e;try{window.b.c()}catch(t){e=t.stack,!e&&window.opera&&(e=(String(t).match(/of linked script \S+/g)||[]).join(" "))}if(e)return e=e.split(/[@ ]/g).pop(),e="("===e[0]?e.slice(1,-1):e,e.replace(/(:\d+)?:\d+$/i,"");for(var t,n=document.getElementsByTagName("script"),o=0;t=n[o++];)if("interactive"===t.readyState)return t.className=t.src}function h(e){for(var t=0,n=0,o=void 0;!isNaN(o=e.charCodeAt(n++));)t=(t<<5)-t+o,t&=t;return Math.abs(t).toString(36)}function p(e,t,n){e.setAttribute("type","text/javascript"),n&&e.setAttribute("charset",n),e.setAttribute("src",t),document.getElementsByTagName("head")[0].appendChild(e)}function v(e){e&&e.parentNode&&e.parentNode.removeChild(e),e=null}function w(e,t,n){var o=document.createElement("script"),i=0,r=n||{},a=r.charset||"utf-8",s=t||function(){},c=r.timeout||0,u=void 0;o.onload=o.onreadystatechange=function(){if(!i){var e=o.readyState;if("undefined"==typeof e||"loaded"===e||"complete"===e){i=1;try{s(),clearTimeout(u)}catch(e){console.log(e.message)}finally{o.onload=o.onreadystatechange=null,v(o)}}}},c&&(u=setTimeout(function(){o.onload=o.onreadystatechange=null,v(o),r.onfailure&&r.onfailure()},c)),p(o,e,a)}function g(t,o,i){function r(e){return function(){try{e?u.onfailure&&u.onfailure():(o.apply(window,arguments),clearTimeout(m))}catch(e){console.log(e.message)}finally{window[c]=null,delete window[c],c=null,v(a)}}}var a=document.createElement("SCRIPT"),s="jQuery",c=void 0,u=i||{},l=u.charset||"utf-8",f=u.queryField||"callback",d=u.timeout||0,m=void 0,h=new RegExp("(\\?|&)"+f+"=([^&]*)"),w=void 0;n(o)?c=o:(w=h.exec(t))&&(c=w[2]),c||(c=s+Math.floor(2147483648*Math.random()).toString(36)),e(o)&&(window[c]=r(0)),d&&(m=setTimeout(r(1),d)),t=t.replace(h,"$1"+f+"="+c),t.search(h)<0&&(t+=(t.indexOf("?")<0?"?":"&")+f+"="+c),p(a,t,l)}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],o=[];n&&(t.a=(+new Date).toString(36));for(var i in t)t[i]&&o.push(i+"="+encodeURIComponent(t[i]));o=o.join("&"),e+=o?(e.indexOf("?")!==-1?"&":"?")+o:"";var r="mimic_imglog_"+(+new Date).toString(36),a=new Image;window[r]=a,a.onload=a.onerror=a.onabort=function(){a.onload=a.onerror=a.onabort=null,a=null,window[r]=null,delete window[r],r=null},a.src=e}function b(e){var t=e.match(te),n=void 0;return t&&(n={},["","protocal","name","domian","port","path","query","hash"].forEach(function(e,o){e&&t[o]&&(n[e]=t[o])})),n}function k(e,t){var n=e.indexOf("?")!==-1?"&":"?",o=[];for(var i in t)o.push(i+"="+encodeURIComponent(t[i]));return""+e+n+o.join("&")}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=void 0,n=void 0;if(e.performance&&(n=e.performance.timing)){t={};try{t.load=Math.floor(n.loadEventStart-n.responseStart),t.ready=Math.floor(n.domContentLoadedEventEnd-n.responseStart),t.dns=Math.floor(n.domainLookupEnd-n.domainLookupStart),t.ttfb=Math.floor(n.responseStart-n.navigationStart),t.content=Math.floor(n.responseEnd-n.requestStart),t.tcp=Math.floor(n.connectEnd-n.connectStart),t.dur=Math.floor(n.responseEnd-n.navigationStart)}catch(e){}}return t}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=void 0;try{t=e.chrome&&e.chrome.csi&&Math.floor(e.chrome.csi().pageT)||e.gtbExternal&&window.gtbExternal.pageT()||e.external&&window.external.pageT}catch(e){}return t}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=void 0,o=void 0;return t.performance&&t.performance.getEntriesByName&&(n=t.performance.getEntriesByName(e)[0])&&(o={},o.st=Math.floor(n.startTime),o.fs=Math.floor(n.fetchStart),n.responseStart>0&&(o.dns=Math.floor(n.domainLookupEnd-n.domainLookupStart),o.tcp=Math.floor(n.connectEnd-n.connectStart),n.secureConnectionStart&&(o.ssl=Math.floor(n.connectEnd-n.secureConnectionStart)),o.ttfb=Math.floor(n.responseStart-n.fetchStart),o.content=Math.floor(n.responseEnd-n.responseStart)),o.dur=Math.floor(n.duration)),o}function _(e){return n(e)&&(e={message:e}),e}function I(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function M(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function j(e){(we||(we=new ve)).push(e)}function O(e){var t=e.touches?e.touches[0]:e;ge.d=t.screenX,ge.e=0,ge.f=0,I(e.target,"touchmove",D)}function D(e){var t=e.touches?e.touches[0]:e,n=t.screenX-ge.d,o=n/Math.abs(n);o!==ge.f&&ge.e>be?(ge.f=o,ge.d=t.screenX,ye++):ge.e=Math.abs(n)}function T(e,t,n){ye>=ke&&(console.log("debug mode trigger"),n(t)),ge={},ye=0}function N(){return window.mimic||(window.mimic={})}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;return Te||(Te=N().enableLogger?new pe(e):pe.nullLogger)}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return Ne[e]||(Ne[e]=N().enablePerf?new de(e):de.nullPerf)}function C(e){Re||(Re=document.createElement("div"),Re.style.cssText="display:none;z-index:99999;background:rgba(0, 0, 0, .5);height:100%;width:100%;position:fixed;top:0px",Re.addEventListener("touchend",function(e){if("A"===e.target.tagName.toUpperCase())try{var t=Re.querySelector(".mc-debug-msg"),n=document.createRange();n.selectNode(t),window.getSelection().addRange(n);var o=document.execCommand("copy");o?e.target.parentNode.parentNode.style.display="none":confirm(Ce)||(e.target.parentNode.parentNode.style.display="none"),window.getSelection().removeAllRanges()}catch(e){confirm(Ce)||(e.target.parentNode.parentNode.style.display="none")}e.stopPropagation(),e.preventDefault()},!1),document.body.appendChild(Re)),Re.innerHTML=['<div style="top:80px;position:absolute;width:80%;background:#fff;border-radius:5px;border:1px solid #ccc;left:10%;box-sizing:border-box;">','<div class="mc-debug-msg" style="max-height:300px;margin:20px;overflow:auto;font-size:14px;line-height:20px;word-break:break-all;">'+e+"</div>",'<a style="text-decoration:none;color:#333;display:block;line-height:50px;font-size:18px;text-align:center;border-top: 1px solid #efefef;" href="javascript:;">复制并关闭</a>',"</div>"].join(""),Re.style.display="block"}function q(){return Pe||(Pe=new Se(function(e){var t=he.getSlotByDivId(e.id);t&&C(JSON.stringify(t.g))}))}function B(){return Ue||(Ue=new IntersectionObserver(function(e){e.forEach(function(e){var t=e.target.id;console.log("trigger",t,e.intersectionRatio),e.intersectionRatio>=Be?qe[t]=setTimeout(function(e){Ue.unobserve(document.querySelector("#"+e)),delete qe[e];var t=he.getSlotByDivId(e);t&&(console.log("viewable: ",t.h),t.impressionViewable())}.bind(null,t),1e3*Ae):(clearTimeout(qe[t]),delete qe[t])})},{threshold:[.9*Be,Be]}))}function A(e,t){var n=N();n.hasOwnProperty(e)||(n[e]=t)}function U(){var e=Ee.get("sax_native_service");return e||(e=new Ie,Ee.set(e.i,e)),e}function L(){return Le=Le||parseInt(De.get("mimic_c"),10),Le&&!isNaN(Le)||(Le=f(0,100),De.set("mimic_c",Le,{expires:2592e6})),Le}function z(){Le=L(),Le=++Le>1e3?0:Le,De.set("mimic_c",Le,{expires:2592e6})}function F(e){e=e||Y;try{var t=ze.exec(decodeURIComponent(e));if(t)return t[1]&&t[1].length>0?t[1].substring(1):"true"}catch(e){}return""}function G(){var e=N();e.component||A("component",ce);var t=[];"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype||(P().log("mimic: need intersectionobserver pollyfill"),t.push(new Promise(function(e){w(le,e)}))),t.push(new Promise(function(t){w(e.component,t)})),Promise.all(t).then(function(){P().log("mimic:deps ready"),Qe.mimic.evalScripts?Qe.mimic.evalScripts():(A("evalScripts",Q),$())},function(){P().log("mimic: can not bootstrap")})}function H(){z();var e=N(),n=e.cmd;if(!n||t(n)){var o=e.cmd=new Fe;n&&n.length>0&&o.push.apply(o,n)}}function $(){var e=N();F(Qe.location.href),A("apiReady",!0),e.defer&&"complete"!==document.readyState?I(Qe,"load",function(){Qe.setTimeout(function(){H()},0)}):H(),j(function(e){var t=N();if(t.backRefresh){try{z(),Object.keys(Ee.get()).forEach(function(e){var t=Ee.get(e);t.refresh()})}catch(e){P().log("refresh error: "+e.message)}P().log("mimic:bfcache["+e+"]"+JSON.stringify(t))}}),R().report(m()),R().report(ue),R().report(le),R().report(e.component),I(Qe,"load",function(){P().log("mimic:onload"),R().report()})}function Q(){(document.getElementsByTagName("script")||[]).forEach(function(e){var t=e.src;t&&t.indexOf("/mimic.js")!==-1&&e.innerHTML&&!e.mimic_executed&&(e.mimic_executed=!0,window.eval(e.innerHTML))})}var V=Object.freeze({get:s,set:c,remove:u}),J=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},W=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),X=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},K=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Y=function(){var e=void 0;try{e=window.top.location.href}catch(e){}return e=e||(window.top===window.self?window.location.href:window.document.referrer)}(),Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];J(this,e),this.list=t}return W(e,[{key:"check",value:function(e){return this.list.indexOf(e)!==-1}}]),e}(),ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];J(this,e);var o=s("ustat");this.gray=!!o&&(new Z(n).check(o)||t>0&&parseInt(h(o),36)%100<=t)}return W(e,[{key:"check",value:function(){return this.gray}}]),e}(),te=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/,ne=b(Y),oe=ne.protocal+"://csi.sina.cn",ie=ne.protocal+"://d"+f(0,9)+".sinaimg.cn/litong/mimic",re=oe+"/csi",ae=oe+"/rec",se=ne.protocal+"://sax.sina.cn/native/impress",ce=ie+"/components/mimic-components.js",ue=ie+"/pollyfill/es6-promise.min.js",le=ie+"/pollyfill/IntersectionObserver.js",fe=window.performance?window.performance.navigationStart||window.performance.fetchStart:Date.now(),de=function(){function e(t){J(this,e),this.reciveUrl=t}return W(e,[{key:"report",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,o=void 0,i=void 0;n(arguments[0])?(i=e.split("?")[0].replace(/^(http|https):\/\//,""),o=E(e,t)):(t=e,i="global",o=S(t)),o&&(o.l="resource",o.tg=i,o.pt=this.constructor.now(),o.mem=this.constructor.getGlobalMemory(t),o.top=Y,y(this.reciveUrl,o))}}],[{key:"now",value:function(){var e=x(window);return e||(window.performance&&window.performance.now?window.performance.now():Date.now()-fe)}},{key:"getGlobalMemory",value:function(){return window.performance&&window.performance.memory&&window.performance.memory.usedJSHeapSize||0}}]),e}();de.nullPerf={report:function(){}};var me={j:{},k:{},m:{},n:{},o:[]},he=function(){function e(t,n,i,r){J(this,e),this.h=t,this.p=o(n)?n:0,this.q=this.h+"_"+this.p,this.s=r||"mimic_slot_"+this.q,this.t=!0,this.u=!1,this.v=!1,this.w=!1,this.x=!1,this.y=!1,this.z=[],this.A={r:0,fs:0,fe:0,rs:0,re:0,c:0}}return W(e,[{key:"addService",value:function(e){return this.z.push(e),e.addSlot(this),this}},{key:"fetchStart",value:function(){this.w=!0}},{key:"fetchEnded",value:function(){this.x=!0}},{key:"impressionViewable",value:function(){var e=this.g&&this.g.vision;e&&e.forEach(function(e){y(k(e,{pt:de.now()}))})}},{key:"impression",value:function(){var e=this.g&&this.g.pvmonitor;e&&e.forEach(function(e){y(e)})}},{key:"impressionPlay",value:function(){var e=this.g&&this.g.play;e&&e.forEach(function(e){y(k(e,{pl:1}))})}},{key:"impressionPause",value:function(){var e=this.g&&this.g.play;e&&e.forEach(function(e){y(k(e,{pl:2}))})}},{key:"hasWrapper",value:function(){return!!document.getElementById(this.s)}},{key:"profile",value:function(){var e={l:"slot",pdps:this.h,mem:de.getGlobalMemory()};for(var t in this.A)e[t]=this.A[t];y(re,e)}},{key:"mark",value:function(e){this.A[e]=de.now()}}],[{key:"createSlot",value:function(t,o,i){if(!n(t)||t.length<=0||!o)return null;t in me.k||(me.k[t]=[],me.m[t]=0);var r=new e(t,me.m[t],o,i);return me.m[t]++,i=r.s,me.j[i]?null:(me.k[t].push(r),me.j[i]=r,me.o.push(r),r)}},{key:"getSlotByDivId",value:function(e){return me.j[e]}},{key:"getSlotsByPdps",value:function(e){return me.k[e]}},{key:"isPersistent",value:function(e){return e.q in me.n}},{key:"persistent",value:function(e){me.n[e.q]=null}},{key:"getSlots",value:function(){return me.o}}]),e}(),pe=function(){function e(t){J(this,e),this.B=t+(t.indexOf("?")!==-1?"&":"?")}return W(e,[{key:"log",value:function(e){console.log(e),y(this.B+"t=log",_(e))}},{key:"info",value:function(e){console.info(e),y(this.B+"t=info",_(e))}},{key:"error",value:function(e){console.error(e),y(this.B+"t=err",_(e))}}]),e}();pe.nullLogger={log:function(){},info:function(){},error:function(){}},window.mimic_bfc_cache_ts=+new Date;var ve=function(){function t(){J(this,t),this.listeners=[],this.init()}return W(t,[{key:"init",value:function(){var e=this;"onpageshow"in window&&"onpagehide"in window?(I(window,"pageshow",function(t){if(t.persisted)e.flush("PERSISTED");else{var n=+new Date,o=window.mimic_bfc_cache_ts;n-o>3e3&&e.flush("DIFFTIMESTAMP")}}),I(window,"pagehide",function(){window.mimic_bfc_cache_ts=+new Date})):setInterval(function(){var t=+new Date,n=window.mimic_bfc_cache_ts;window.mimic_bfc_cache_ts=t,t-n>3e3&&e.flush("DIFFTIMESTAMP")},1e3)}},{key:"push",value:function(e){this.listeners.push(e)}},{key:"flush",value:function(t){this.listeners.forEach(function(n){e(n)&&n(t)})}}]),t}(),we=void 0,ge={},ye=0,be=50,ke=5,Se=function(){function t(e){J(this,t),this.C=e}return W(t,[{key:"observe",value:function(t){var o=this;t=n(t)?d(t):t,t&&e(this.C)&&(I(t,"touchstart",O),I(t,"touchend",function(e){T(e,t,o.C),M(e.target,"touchmove",D)}))}}]),t}(),xe={D:{},F:!1};I(window,"load",function(){xe.F=!0});var Ee=function(){function e(){J(this,e),this.G=!1,this.o=[],this.H={},this.I=!0,this.J=!0,this.K=!1,this.L=!1,this.M=null}return W(e,[{key:"enable",value:function(){this.G=!0}},{key:"addSlot",value:function(e){this.H[e.q]||(this.o.push(e),this.H[e.q]=e)}},{key:"getSlots",value:function(){return this.o}},{key:"fillSlot",value:function(e){var t=this.getImpl();e.v&&e.x?t.renderSlot(e):e&&this.H[e.q]&&!e.g&&t.request(e)}},{key:"refresh",value:function(){var e=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o=t(o)?o:[o],o=o.length>0?o:this.getSlots();var i=[];o.forEach(function(e){n(e)&&(e=he.getSlotByDivId(e)),e&&(e.w=!1,e.x=!1,e.g=null),i.push(e)}),i.forEach(function(t){e.fillSlot(t)})}},{key:"enableSingleRequest",value:function(){this.K=!0}},{key:"collapseEmptyDivs",value:function(e){}}],[{key:"get",value:function(e){return n(e)?xe.D[e]:xe.D}},{key:"set",value:function(e,t){xe.D[e]=t}},{key:"isPageOnload",value:function(){return xe.F}}]),e}(),_e=function(){function n(){J(this,n),this.N=0,this.O={}}return W(n,[{key:"request",value:function(e){var t=this,n=U().K?U().getSlots():[e];if(n=n.filter(function(e){return!e.w}),n.length>0){n.forEach(function(e){e.fetchStart()});var o=this.getRequestUrl({slots:n});this.O[this.N]=n,he.isPersistent(n[0])||(P().log("get ad"+ +new Date),g(o,function(e,n,o){R().report(n),t.processResponse(o,e)}.bind(this,this.N++,o),{timeout:3e3,onfailure:function(e){var t=new Image;t.src="//sax.sina.com.cn/view?type=mimic_req&cat=timeout&ts="+ +new Date+"&ref="+encodeURIComponent(window.top.url),P().error({message:"mimic: field",url:e})}.bind(this,o)}))}}},{key:"getRequestUrl",value:function(e){var t=se,n={callback:"jQuery_"+(new Date).getTime().toString(36),adunit_id:e.slots.map(function(e){return e.mark("fs"),e.h}).join(),page_url:Y,npic:parseInt(s("NPIC"),10)?1:0,timestamp:(new Date).getTime(),rotate_count:L()},o=[];return Object.keys(n).forEach(function(e){var t=n[e];t&&o.push(e+"="+encodeURIComponent(t))}),t+"?"+o.join("&")}},{key:"renderSlot",value:function(t){t.P&&e(t.P.destory)&&(t.P.destory(),delete t.P);var n={31:"card",32:"videocard",61:"card",43:"card2",33:"pic3",35:"bigpic",36:"tel",37:"callout",38:"download",40:"dynamicpic",42:"video",34:"text"},o=void 0,i=void 0;if(t.s&&(o=d(t.s))&&t.g&&t.g.templateid&&(i=parseInt(s("NPIC"),10)?"nopic":n[t.g.templateid])){t.mark("rs"),t.Q||(I(o,"mousedown",function(e){for(var t=e.target,n=void 0;t&&t!==this;)t&&"A"===t.tagName.toUpperCase()&&(n=t.getAttribute("mimic-url"))&&t.setAttribute("href",k(n,{am:"{clkx:"+e.pageX+",clky:"+e.pageY+"}"})),t=t.parentNode}),q().observe(o),t.Q=!0),t.impression();var r={};"video"===i&&(r.play=function(){var e=he.getSlotByDivId(this.getDomId());e&&e.impressionPlay()},r.pause=function(){var e=he.getSlotByDivId(this.getDomId());e&&e.impressionPause()}),t.P=new SinaAD[i]({el:o,data:t.g,listeners:r}),B().observe(o),t.mark("re"),(t.g.R||F())&&t.profile()}}},{key:"processResponse",value:function(e,t){var n=this,o=this.O[t];o=this.setResponseToSlots(e,o),delete this.O[t],o.forEach(function(e){e.mark("fe"),e.v&&n.renderSlot(e)})}},{key:"setResponseToSlots",value:function(e,n){t(e)||(e=[e]);var o=[],i={};return e.forEach(function(e){i[e.pdps]=e}),n.forEach(function(e){var t=i[e.h]||null;t&&(e.g=t,e.fetchEnded(),t.S,t.T&&he.persistent(e),o.push(e))}),o}}]),n}(),Ie=function(e){function t(){J(this,t);var e=K(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.i="sax_native_service",e}return X(t,e),W(t,[{key:"getImpl",value:function(){return this.M||(this.M=new _e)}}]),t}(Ee),Me={},je={get:function(e){if(Me[e])return window.sessionStorage.getItem(e);var t=window.localStorage.getItem(e);return t?(t=t.split(";expires="),t[1]&&l()>parseInt(t[1],10)?(window.localStorage.removeItem(e),null):t[0]):void 0},set:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.expires?window.localStorage.setItem(e,t+(n.expires?";expires="+(l()+n.expires):"")):(Me[e]=1,window.sessionStorage.setItem(e,t))},remove:function(e){Me[e]?(delete Me[e],window.sessionStorage.removeItem(e)):window.localStorage.removeItem(e)}},Oe=window.localStorage?je:V;try{Oe.set("mimi_lib_test_ls","support")}catch(e){Oe=V}var De=Oe,Te=void 0,Ne={},Pe=void 0,Re=void 0,Ce="复制失败，确定返回手工复制，取消直接关闭窗口",qe={},Be=.5,Ae=.3,Ue=void 0,Le=void 0,ze=/.*[&#?]__debug_mimic__(=[^&]*)?(&.*)?$/,Fe=function(){function t(){J(this,t),this.U=0,this.V=0}return W(t,[{key:"push",value:function(){for(var t=0;t<arguments.length;++t)try{e(arguments[t])&&(arguments[t](),this.U++)}catch(e){P().log(e.message),this.V++}return this.success}}]),t}(),Ge=navigator.userAgent,He=[[/(opera\smini)\/([\w.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w.-]+)/i,/(opera).+version\/([\w.]+)/i,/(opera)[\/\s]+([\w.]+)/i],["name","version"],[/(opios)[\/\s]+([\w.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w.]*)/i,/(?:ms|\()(ie)\s([\w.]+)/i,/(rekonq)\/([\w.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w.-]+)/i],["name","version"],[/(trident).+rv[:\s]([\w.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w.]+)/i],["name","version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w.]+)/i,/(qqbrowser)[\/\s]?([\w.]+)/i],["name","version"],[/\s+(qq)[\/\s]?([\w.]+)/i],[["name","QQ WebView"],"version"],[/(uc\s?browser)[\/\s]?([\w.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w.]+)/i,/juc.+(ucweb)[\/\s]?([\w.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w.]+)/i],[["name","Dolphin"],"version"],[/;fbav\/([\w.]+);/i],["version",["name","Facebook"]],[/(yabrowser)\/([\w.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w.]+)/i],[["name",/_/g," "],"version"],[/(micromessenger)\/([\w.]+)/i],[["name","WeChat"],"version"],[/xiaomi\/miuibrowser\/([\w.]+)/i],["version",["name","MIUI Browser"]],[/\swv\).+(chrome)\/([\w.]+)/i],[["name",/(.+)/,"$1 WebView"],"version"],[/android.+samsungbrowser\/([\w.]+)/i,/android.+version\/([\w.]+)\s+(?:mobile\s?safari|safari)*/i],["version",["name","Android Browser"]],[/((?:android.+)crmo|crios)\/([\w.]+)/i],[["name","Chrome"],"version"],[/fxios\/([\w.-]+)/i],["version",["name","Firefox"]],[/version\/([\w.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w.]+)/i],["name",["version","3.0"]],[/(konqueror)\/([\w.]+)/i,/(webkit|khtml)\/([\w.]+)/i],["name","version"],[/(navigator|netscape)\/([\w.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w.+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w.-]+)/i,/(mozilla)\/([\w.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w.]+)/i,/(links)\s\(([\w.]+)/i,/(gobrowser)\/?([\w.]+)*/i,/(ice\s?browser)\/v?([\w._]+)/i,/(mosaic)[\/\s]([\w.]+)/i],["name","version"]],$e=function(){for(var e=!1,n={net:"unknow",name:"unknow",version:0,ua:Ge},o=-2,i=void 0,r=void 0;o+=2,(r=He[o+1])&&(i=He[o])&&!e;)i.some(function(o){var i=o.exec(Ge);if(i)return e=!0,r.forEach(function(e,o){t(e)?n[e[0]]=e[1]:n[e]=i[o+1]}),!0});var a=void 0;return(a=/NetType\/([^\s]*)/i.exec(Ge))&&(n.net=a[1]),n}(),Qe=window,Ve=new ee(100).check();P().log("isGrayUser: "+Ve),P().log("browser: "+JSON.stringify($e)),"Promise"in window?Promise.resolve().then(G):(P().log("mimic: need promise pollyfill"),w(ue,G)),A("sns",U),A("defineSlot",he.createSlot),A("enableServices",function(){Object.keys(Ee.get()).forEach(function(e){var t=Ee.get(e);t.enable()})}),A("display",function(e){var t=void 0;n(e)&&(t=he.getSlotByDivId(e))&&(t.v=!0,t.mark("r"),t.t&&!t.hasWrapper()||t.z.forEach(function(e){e.G&&e.fillSlot(t)}))})}();
//# sourceMappingURL=mimic.js.map